{"ast":null,"code":"import _objectSpread from\"/Users/kieran/Documents/GitHub/flashcard-project/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/kieran/Documents/GitHub/flashcard-project/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/kieran/Documents/GitHub/flashcard-project/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/kieran/Documents/GitHub/flashcard-project/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{Link,useHistory,useParams}from\"react-router-dom\";import{createCard,readDeck}from\"../../utils/api/index\";import CardForm from\"./CardForm\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function AddCard(){var _useParams=useParams(),deckId=_useParams.deckId;var history=useHistory();var initialState={front:\"\",back:\"\"};var _useState=useState(initialState),_useState2=_slicedToArray(_useState,2),card=_useState2[0],setCard=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),deck=_useState4[0],setDeck=_useState4[1];useEffect(function(){function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var abortController,response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:abortController=new AbortController();if(deckId){_context.next=3;break;}return _context.abrupt(\"return\");case 3:_context.prev=3;_context.next=6;return readDeck(deckId,abortController.signal);case 6:response=_context.sent;setDeck(response);_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](3);console.error(\"Something went wrong\",_context.t0);case 13:return _context.abrupt(\"return\",function(){abortController.abort();});case 14:case\"end\":return _context.stop();}}},_callee,null,[[3,10]]);}));return _fetchData.apply(this,arguments);}fetchData();},[deckId]);function submitHandler(_x){return _submitHandler.apply(this,arguments);}function _submitHandler(){_submitHandler=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(event){var abortController,response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:event.preventDefault();abortController=new AbortController();_context2.next=4;return createCard(deckId,_objectSpread({},card),abortController.signal);case 4:response=_context2.sent;history.push(\"/decks/\"+deckId);return _context2.abrupt(\"return\",response);case 7:case\"end\":return _context2.stop();}}},_callee2);}));return _submitHandler.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"ol\",{className:\"breadcrumb\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"breadcrumb-item\",children:/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Home\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"breadcrumb-item\",children:/*#__PURE__*/_jsx(Link,{to:\"/decks/\".concat(deckId),children:deck.name})}),/*#__PURE__*/_jsx(\"li\",{className:\"breadcrumb-item active\",children:\"Add Card\"})]})}),/*#__PURE__*/_jsx(CardForm,{submitHandler:submitHandler,card:card,setCard:setCard})]});}export default AddCard;","map":{"version":3,"names":["React","useState","useEffect","Link","useHistory","useParams","createCard","readDeck","CardForm","AddCard","deckId","history","initialState","front","back","card","setCard","deck","setDeck","fetchData","abortController","AbortController","signal","response","console","error","abort","submitHandler","event","preventDefault","push","name"],"sources":["/Users/kieran/Documents/GitHub/flashcard-project/src/Components/Cards/AddCard.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Link, useHistory, useParams } from \"react-router-dom\";\nimport { createCard, readDeck } from \"../../utils/api/index\";\nimport CardForm from \"./CardForm\";\n\nfunction AddCard() {\n    const { deckId } = useParams();\n    \n    const history = useHistory();\n    const initialState = {\n        front: \"\",\n        back: \"\",\n    };\n    const [card, setCard] = useState(initialState);\n    const [deck, setDeck] = useState({});\n\n    useEffect(() => {\n        async function fetchData() {\n            const abortController = new AbortController();\n            if (!deckId) return\n            try {\n                const response = await readDeck(deckId, abortController.signal);\n                setDeck(response);\n            } catch (error) {\n                console.error(\"Something went wrong\", error);\n            }\n            return () => {\n                abortController.abort();\n            };\n        }\n        fetchData();\n    }, [deckId]);\n\n    async function submitHandler(event) {\n        event.preventDefault();\n        const abortController = new AbortController();\n        const response = await createCard(\n            deckId,\n            { ...card },\n            abortController.signal\n        );\n        history.push(\"/decks/\"+deckId);\n        return response;\n    }\n\n    return (\n      <div>\n        <div>\n            <ol className=\"breadcrumb\">\n                <li className=\"breadcrumb-item\">\n                    <Link to=\"/\">Home</Link>\n                </li>\n                <li className=\"breadcrumb-item\">\n                    <Link to={`/decks/${deckId}`}>{deck.name}</Link>\n                </li>\n                <li className=\"breadcrumb-item active\">Add Card</li>\n            </ol>\n        </div>\n        <CardForm submitHandler={submitHandler} card = {card} setCard = {setCard}/>\n    </div>\n    );\n}\n\nexport default AddCard;"],"mappings":"uiBAAA,MAAOA,MAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,IAAT,CAAeC,UAAf,CAA2BC,SAA3B,KAA4C,kBAA5C,CACA,OAASC,UAAT,CAAqBC,QAArB,KAAqC,uBAArC,CACA,MAAOC,SAAP,KAAqB,YAArB,C,wFAEA,QAASC,QAAT,EAAmB,CACf,eAAmBJ,SAAS,EAA5B,CAAQK,MAAR,YAAQA,MAAR,CAEA,GAAMC,QAAO,CAAGP,UAAU,EAA1B,CACA,GAAMQ,aAAY,CAAG,CACjBC,KAAK,CAAE,EADU,CAEjBC,IAAI,CAAE,EAFW,CAArB,CAIA,cAAwBb,QAAQ,CAACW,YAAD,CAAhC,wCAAOG,IAAP,eAAaC,OAAb,eACA,eAAwBf,QAAQ,CAAC,EAAD,CAAhC,yCAAOgB,IAAP,eAAaC,OAAb,eAEAhB,SAAS,CAAC,UAAM,SACGiB,UADH,uIACZ,kKACUC,eADV,CAC4B,GAAIC,gBAAJ,EAD5B,IAESX,MAFT,uGAI+BH,SAAQ,CAACG,MAAD,CAASU,eAAe,CAACE,MAAzB,CAJvC,QAIcC,QAJd,eAKQL,OAAO,CAACK,QAAD,CAAP,CALR,iFAOQC,OAAO,CAACC,KAAR,CAAc,sBAAd,cAPR,wCASW,UAAM,CACTL,eAAe,CAACM,KAAhB,GACH,CAXL,uEADY,4CAcZP,SAAS,GACZ,CAfQ,CAeN,CAACT,MAAD,CAfM,CAAT,CAXe,QA4BAiB,cA5BA,qJA4Bf,kBAA6BC,KAA7B,qJACIA,KAAK,CAACC,cAAN,GACMT,eAFV,CAE4B,GAAIC,gBAAJ,EAF5B,wBAG2Bf,WAAU,CAC7BI,MAD6B,kBAExBK,IAFwB,EAG7BK,eAAe,CAACE,MAHa,CAHrC,QAGUC,QAHV,gBAQIZ,OAAO,CAACmB,IAAR,CAAa,UAAUpB,MAAvB,EARJ,iCASWa,QATX,0DA5Be,gDAwCf,mBACE,oCACE,kCACI,YAAI,SAAS,CAAC,YAAd,wBACI,WAAI,SAAS,CAAC,iBAAd,uBACI,KAAC,IAAD,EAAM,EAAE,CAAC,GAAT,kBADJ,EADJ,cAII,WAAI,SAAS,CAAC,iBAAd,uBACI,KAAC,IAAD,EAAM,EAAE,kBAAYb,MAAZ,CAAR,UAA+BO,IAAI,CAACc,IAApC,EADJ,EAJJ,cAOI,WAAI,SAAS,CAAC,wBAAd,sBAPJ,GADJ,EADF,cAYE,KAAC,QAAD,EAAU,aAAa,CAAEJ,aAAzB,CAAwC,IAAI,CAAIZ,IAAhD,CAAsD,OAAO,CAAIC,OAAjE,EAZF,GADF,CAgBH,CAED,cAAeP,QAAf"},"metadata":{},"sourceType":"module"}