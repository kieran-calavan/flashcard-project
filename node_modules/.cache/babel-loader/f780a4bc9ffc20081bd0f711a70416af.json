{"ast":null,"code":"import _objectSpread from\"/Users/kieran/Documents/GitHub/flashcard-project/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/kieran/Documents/GitHub/flashcard-project/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/kieran/Documents/GitHub/flashcard-project/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/kieran/Documents/GitHub/flashcard-project/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{useParams,useHistory}from\"react-router-dom\";import{Link}from\"react-router-dom\";import{readDeck,readCard,updateCard}from\"../../utils/api/index\";import CardForm from\"./CardForm\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function EditCard(){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),deck=_useState2[0],setDeck=_useState2[1];var _useParams=useParams(),deckId=_useParams.deckId,cardId=_useParams.cardId;var history=useHistory();var initialState={front:\"\",back:\"\"};var _useState3=useState(initialState),_useState4=_slicedToArray(_useState3,2),card=_useState4[0],setCard=_useState4[1];useEffect(function(){function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var abortController,response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:abortController=new AbortController();_context.prev=1;_context.next=4;return readDeck(deckId,abortController.signal);case 4:response=_context.sent;setDeck(response);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);console.error(\"Something went wrong\",_context.t0);case 11:return _context.abrupt(\"return\",function(){abortController.abort();});case 12:case\"end\":return _context.stop();}}},_callee,null,[[1,8]]);}));return _fetchData.apply(this,arguments);}fetchData();},[deckId]);useEffect(function(){function fetchData(){return _fetchData2.apply(this,arguments);}function _fetchData2(){_fetchData2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var abortController,response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:abortController=new AbortController();_context2.prev=1;_context2.next=4;return readCard(cardId,abortController.signal);case 4:response=_context2.sent;setCard(response);_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](1);console.error(\"Something went wrong\",_context2.t0);case 11:return _context2.abrupt(\"return\",function(){abortController.abort();});case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[1,8]]);}));return _fetchData2.apply(this,arguments);}fetchData();},[cardId]);function submitHandler(_x){return _submitHandler.apply(this,arguments);}function _submitHandler(){_submitHandler=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(event){var abortController,response;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:event.preventDefault();abortController=new AbortController();_context3.next=4;return updateCard(_objectSpread({},card),abortController.signal);case 4:response=_context3.sent;history.push(\"/decks/\"+deckId);return _context3.abrupt(\"return\",response);case 7:case\"end\":return _context3.stop();}}},_callee3);}));return _submitHandler.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"nav\",{\"aria-label\":\"breadcrumb\",children:/*#__PURE__*/_jsxs(\"ol\",{className:\"breadcrumb\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"breadcrumb-item active\",\"aria-current\":\"page\",children:/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Home\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"breadcrumb-item\",\"aria-current\":\"page\",children:/*#__PURE__*/_jsx(Link,{to:\"/decks/\".concat(deckId),children:deck.name})}),/*#__PURE__*/_jsx(\"li\",{className:\"breadcrumb-item\",\"aria-current\":\"page\",children:\"Edit Deck\"})]})}),/*#__PURE__*/_jsx(CardForm,{submitHandler:submitHandler,card:card,setCard:setCard})]});}export default EditCard;","map":{"version":3,"names":["React","useState","useEffect","useParams","useHistory","Link","readDeck","readCard","updateCard","CardForm","EditCard","deck","setDeck","deckId","cardId","history","initialState","front","back","card","setCard","fetchData","abortController","AbortController","signal","response","console","error","abort","submitHandler","event","preventDefault","push","name"],"sources":["/Users/kieran/Documents/GitHub/flashcard-project/src/Components/Cards/EditCard.js"],"sourcesContent":["import React,{useState, useEffect} from \"react\";\nimport { useParams, useHistory } from \"react-router-dom\";\nimport {Link} from \"react-router-dom\";\nimport { readDeck, readCard, updateCard} from \"../../utils/api/index\";\nimport CardForm from \"./CardForm\"\n\n\nfunction EditCard() {\n    const [deck, setDeck] = useState ({})\n    const {deckId, cardId} = useParams();  \n    const history = useHistory()\n    const initialState = {\n      front: \"\",\n      back: \"\",\n  };\n\n  const [card, setCard] = useState(initialState);\n\n  useEffect(() => {\n      async function fetchData() {\n          const abortController = new AbortController();\n          try {\n              const response = await readDeck(deckId, abortController.signal);\n              setDeck(response);\n          } catch (error) {\n              console.error(\"Something went wrong\", error);\n          }\n          return () => {\n              abortController.abort();\n          };\n      }\n      fetchData();\n  }, [deckId]);\n\n  useEffect(() => {\n    async function fetchData() {\n        const abortController = new AbortController();\n        try {\n            const response = await readCard(cardId, abortController.signal);\n            setCard(response);\n        } catch (error) {\n            console.error(\"Something went wrong\", error);\n        }\n        return () => {\n            abortController.abort();\n        };\n    }\n    fetchData();\n}, [cardId]);\n\n  async function submitHandler(event) {\n    event.preventDefault();\n    const abortController = new AbortController();\n    const response = await updateCard(\n        { ...card },\n        abortController.signal\n    );\n    history.push(\"/decks/\"+deckId);\n    return response;\n}\n\nreturn (\n    <div>\n      <nav aria-label=\"breadcrumb\">\n      <ol className=\"breadcrumb\">\n        <li className=\"breadcrumb-item active\" aria-current=\"page\"><Link to ='/'>Home</Link></li>\n        <li className=\"breadcrumb-item\" aria-current=\"page\"><Link to={`/decks/${deckId}`}>{deck.name}</Link></li>\n        <li className=\"breadcrumb-item\" aria-current=\"page\">Edit Deck</li>\n      </ol>\n      </nav>\n        \n<CardForm submitHandler = {submitHandler} card = {card} setCard = {setCard} />\n\n</div>\n  )\n}\nexport default EditCard"],"mappings":"uiBAAA,MAAOA,MAAP,EAAcC,QAAd,CAAwBC,SAAxB,KAAwC,OAAxC,CACA,OAASC,SAAT,CAAoBC,UAApB,KAAsC,kBAAtC,CACA,OAAQC,IAAR,KAAmB,kBAAnB,CACA,OAASC,QAAT,CAAmBC,QAAnB,CAA6BC,UAA7B,KAA8C,uBAA9C,CACA,MAAOC,SAAP,KAAqB,YAArB,C,wFAGA,QAASC,SAAT,EAAoB,CAChB,cAAwBT,QAAQ,CAAE,EAAF,CAAhC,wCAAOU,IAAP,eAAaC,OAAb,eACA,eAAyBT,SAAS,EAAlC,CAAOU,MAAP,YAAOA,MAAP,CAAeC,MAAf,YAAeA,MAAf,CACA,GAAMC,QAAO,CAAGX,UAAU,EAA1B,CACA,GAAMY,aAAY,CAAG,CACnBC,KAAK,CAAE,EADY,CAEnBC,IAAI,CAAE,EAFa,CAArB,CAKF,eAAwBjB,QAAQ,CAACe,YAAD,CAAhC,yCAAOG,IAAP,eAAaC,OAAb,eAEAlB,SAAS,CAAC,UAAM,SACGmB,UADH,uIACZ,kKACUC,eADV,CAC4B,GAAIC,gBAAJ,EAD5B,uCAG+BjB,SAAQ,CAACO,MAAD,CAASS,eAAe,CAACE,MAAzB,CAHvC,QAGcC,QAHd,eAIQb,OAAO,CAACa,QAAD,CAAP,CAJR,+EAMQC,OAAO,CAACC,KAAR,CAAc,sBAAd,cANR,wCAQW,UAAM,CACTL,eAAe,CAACM,KAAhB,GACH,CAVL,sEADY,4CAaZP,SAAS,GACZ,CAdQ,CAcN,CAACR,MAAD,CAdM,CAAT,CAgBAX,SAAS,CAAC,UAAM,SACCmB,UADD,0IACd,uKACUC,eADV,CAC4B,GAAIC,gBAAJ,EAD5B,yCAG+BhB,SAAQ,CAACO,MAAD,CAASQ,eAAe,CAACE,MAAzB,CAHvC,QAGcC,QAHd,gBAIQL,OAAO,CAACK,QAAD,CAAP,CAJR,mFAMQC,OAAO,CAACC,KAAR,CAAc,sBAAd,eANR,yCAQW,UAAM,CACTL,eAAe,CAACM,KAAhB,GACH,CAVL,wEADc,6CAadP,SAAS,GACZ,CAdU,CAcR,CAACP,MAAD,CAdQ,CAAT,CA3BkB,QA2CHe,cA3CG,qJA2ClB,kBAA6BC,KAA7B,qJACEA,KAAK,CAACC,cAAN,GACMT,eAFR,CAE0B,GAAIC,gBAAJ,EAF1B,wBAGyBf,WAAU,kBACxBW,IADwB,EAE7BG,eAAe,CAACE,MAFa,CAHnC,QAGQC,QAHR,gBAOEV,OAAO,CAACiB,IAAR,CAAa,UAAUnB,MAAvB,EAPF,iCAQSY,QART,0DA3CkB,gDAsDpB,mBACI,oCACE,YAAK,aAAW,YAAhB,uBACA,YAAI,SAAS,CAAC,YAAd,wBACE,WAAI,SAAS,CAAC,wBAAd,CAAuC,eAAa,MAApD,uBAA2D,KAAC,IAAD,EAAM,EAAE,CAAE,GAAV,kBAA3D,EADF,cAEE,WAAI,SAAS,CAAC,iBAAd,CAAgC,eAAa,MAA7C,uBAAoD,KAAC,IAAD,EAAM,EAAE,kBAAYZ,MAAZ,CAAR,UAA+BF,IAAI,CAACsB,IAApC,EAApD,EAFF,cAGE,WAAI,SAAS,CAAC,iBAAd,CAAgC,eAAa,MAA7C,uBAHF,GADA,EADF,cASJ,KAAC,QAAD,EAAU,aAAa,CAAIJ,aAA3B,CAA0C,IAAI,CAAIV,IAAlD,CAAwD,OAAO,CAAIC,OAAnE,EATI,GADJ,CAcC,CACD,cAAeV,SAAf"},"metadata":{},"sourceType":"module"}